/*
 * auto_play.c
/*
 *
 *  Created on: 2023/12/30
 *      Author: kameyamahiroki
 */
/********************************************************************/
/*ヘッダーファイル													*/
/********************************************************************/
#include "main.h"

/********************************************************************/
/* 定数定義															*/
/********************************************************************/

//アヴェマリア音の高さテーブル
const unsigned char ave_maria_score[] = {48,47,48,52,50,48,48,73,
						50,52,50,48,47,45,47,48,73,52,52,50,48,47,45,52,54,
						52,51,73,47,51,48,47,50,52,53,50,47,48,73,52,
						50,47,45,49,52,55,52,48,50,73,45,47,48,47,45,43,73,43,
						50,50,50,49,50,52,50,52,48,73,48,50,50,50,49,50,53,52,50,
						48,73,52,50,50,52,52,52,51,52,55,57,53,73,45,45,
						53,50,50,48,48,47,48,51,50,48,50,73,
						48,47,48,52,50,50,48,73,};
//アヴェマリア音の長さテーブル
const unsigned short ave_maria_note_value[] = {1500,333,166,1000,833,166,1500,500,
									833,84,84,333,167,333,167,1000,500,500,667,167,167,333,167,333,167,
									1000,500,333,167,833,166,166,166,166,166,166,166,1000,500,500,
									750,250,166,166,166,166,166,166,1000,166,166,166,166,166,166,1000,500,500,
									750,250,333,167,333,167,333,167,500,500,500,750,250,166,166,166,166,166,166,
									1000,500,500,750,250,333,167,166,166,166,333,166,500,500,333,167,
									333,167,333,166,166,166,166,166,166,166,1500,500,
									1500,333,167,1000,667,333,2500,500};
//聖者の行進音の高さテーブル
const unsigned char saint_march_score[] = {36,40,41,43,36,40,41,43,36,40,41,
								43,40,36,40,38,38,40,38,
								36,36,40,43,43,41,40,41,
								43,40,36,38,36,36};
//聖者の行進音の長さテーブル
const unsigned short saint_march_note_value[] = {250,250,250,1250,250,250,250,1250,250,250,250,
										500,500,500,500,1250,500,250,250,
										750,250,500,500,250,1250,250,250,
										500,500,500,500,1000,250};
//メヌエット音の高さテーブル
const unsigned char menuett_score[] = {38,31,33,35,36,38,31,31,40,36,38,40,42,43,31,31,
							36,38,36,35,33,35,36,35,33,31,30,31,33,35,31,35,33,
							38,31,33,35,36,38,31,31,40,36,38,40,42,43,31,31,
							36,38,36,35,33,35,36,35,33,31,33,35,33,31,30,31,
							47,43,45,47,43,45,38,40,42,38,43,40,42,43,38,37,35,37,33,
							33,35,37,38,40,42,43,42,40,42,33,37,38,
							38,31,30,31,40,31,30,31,38,36,35,33,31,30,31,33,
							26,28,30,31,33,35,36,35,33,35,38,31,30,31};

//メヌエット音の長さテーブル
const unsigned short menuett_note_value[] = {500,250,250,250,250,500,500,500,500,250,250,250,250,500,500,500,
								500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,1000,
								500,250,250,250,250,500,500,500,500,250,250,250,250,500,500,500,
								500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,1500,
								500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,250,250,500,
								250,250,250,250,250,250,500,500,500,500,500,500,1500,
								500,250,250,500,500,250,250,500,500,500,500,250,250,250,250,500,
								250,250,250,250,250,250,500,500,500,250,250,500,500,1500};

const unsigned char jesu_joy_of_man_s_score[] = {73,36,38,40,43,41,41,45,43,43,48,47,48,43,40,36,38,40,41,43,45,43,41,40,38,40,36,
										35,36,38,31,35,38,41,40,38,40,36,38,40,43,41,41,45,43,43,48,47,48,43,40,36,38,40,
										33,43,41,40,38,36,31,36,35,36,40,43,48,43,40,36,40,43,40,41,
										43,43,41,40,38,31,33,35,38,36,38,41,40,
										41,38,35,31,35,38,41,40,38,40,41,43,40,
										38,40,41,40,38,36,40,38,40,43,41,41,45,43,43,48,47,48,43,40,36,38,40,
										41,43,45,43,41,40,38,40,36,35,36,38,31,35,38,41,40,38,40,36,38,40,43,41,41,45,43,
										43,48,47,48,43,40,36,38,40,33,43,41,40,38,36,31,36,35,36};//主よ、人の望みの喜びよ
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short jesu_joy_of_man_s_note_value[] = {250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
										250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
										250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,1500,750,
										1500,750,1500,750,250,250,250,250,250,250,250,250,250,
										250,250,250,250,250,250,250,250,250,1500,750,1500,750,
										250,125,125,500,500,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
										250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
										250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,1500};
//5オーラ・リー
const unsigned char aura_lee_score[] = {31,36,35,36,38,33,38,36,35,33,35,36,
								31,36,35,36,38,33,38,36,35,33,35,36,
								40,40,40,40,40,40,40,38,36,38,40,
								40,40,41,40,38,33,38,36,35,33,35,36,};
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short aura_lee_note_value[] = {500,500,500,500,500,500,1000,500,500,500,500,2000,
									500,500,500,500,500,500,1000,500,500,500,500,2000,
									750,250,1000,750,250,1000,500,500,500,500,2000,
									500,500,500,500,500,500,1000,500,500,500,500,2000,};

const unsigned char sakura_score[] = {38,35,36,38,73,31,31,43,43,42,40,38,73,31,31,43,43,42,40,38,35,36,35,
							35,33,73,28,31,36,35,33,35,36,38,38,35,38,31,73,31,30,
							28,28,73,28,30,31,33,73,38,35,36,38,73,31,31,
							43,43,42,40,38,73,31,31,43,43,42,40,38,35,36,35,33,
							73,28,31,36,35,33,35,73,36,38,38,35,38,31,73,31,31,36,36,73,28,30,30,31,31,
							73,33,33,33,35,36,73,36,35,35,35,36,38,73,38,38,
							37,37,37,38,40,40,38,37,38,73,35,36,38,35,36,38,35,33,
							33,43,43,45,42,40,38,36,38,40,42,43,38,31,38,36,35,33,31,33,35,36,
							38,40,38,38,73,38,38,40,43,43,45,47,45,43,
							40,42,43,43,38,35,31,33,35,31,73,33,31,};
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short sakura_note_value[] = {500,250,125,625,250,125,125,375,125,250,125,625,250,125,125,375,125,375,125,125,500,125,125,
								125,1875,375,125,125,250,250,375,125,375,125,375,125,250,625,250,125,125,
								125,875,375,125,125,250,1625,500,500,250,125,625,250,125,125,
								375,125,250,125,625,250,125,125,375,125,375,125,375,125,375,125,2000,
								375,125,125,375,125,125,250,250,250,125,375,125,250,625,250,125,125,250,250,375,125,500,125,250,1625,
								500,250,500,125,125,500,250,250,250,500,125,125,500,250,125,125,
								250,500,125,125,375,125,250,250,1000,500,250,250,500,250,250,500,250,250,
								250,250,250,250,500,250,250,250,250,250,250,250,250,125,250,375,250,250,250,500,250,250,
								500,250,125,625,250,125,125,250,125,375,250,250,250,1000,
								250,250,250,375,250,125,125,250,125,750,500,250,1250,};

const unsigned char zyounetutairiku_score[] = {33,33,38,40,73,41,40,41,43,41,40,73,36,33,73,33,
										34,33,36,73,34,38,73,37,34,73,33,31,33,34,33,31,29,31,33,33,33,
										38,40,73,41,40,41,43,45,46,45,43,41,40,40,
										38,40,73,41,73,40,73,43,73,41,73,38,40,41,43,45,45,45,73,45,45,45,73,33,33,33,
										38,40,73,41,40,41,43,41,40,73,36,33,73,33,
										34,33,36,73,34,38,73,37,34,73,33,31,33,34,33,31,29,31,33,33,33,
										38,40,73,41,40,41,43,45,46,45,43,41,40,40,
										38,40,73,41,73,40,73,43,73,41,73,38,40,41,43,45,45,45,73,45,45,45,
										33,36,38,41,33,73,36,73,38,73,41,33,36,
										38,41,33,73,36,73,38,73,41,33,36,38,41,33,73,35,73,38,73,41,33,35,
										38,41,33,73,35,73,38,73,41,33,33,
										38,40,73,41,40,41,43,41,40,73,36,33,73,33,
										34,33,36,73,34,38,73,37,34,73,33,31,33,34,33,31,29,31,33,33,33,
										38,40,73,41,40,41,43,45,46,45,43,41,40,40,
										38,40,73,41,73,40,73,43,73,41,73,38,40,41,43,
										45,73,38,40,41,45,43,45,
										43,43,48,45,43,41,40,41,38,40,41,41,40,41,
										40,40,43,41,40,38,37,38,38,40,42,45,43,45,
										43,43,48,45,43,41,40,41,38,40,41,41,40,41,
										40,40,43,41,40,38,37,38,73,
										38,41,33,73,36,73,38,73,41,33,36,38,41,33,73,36,73,38,73,41,33,36,
										38,41,33,73,35,73,38,73,41,33,35,38,41,33,73,35,73,38,73,41,33,35,
										38,41,33,73,36,73,38,73,41,33,36,38,41,33,73,36,73,38,73,41,33,36,
										38,41,33,73,35,73,38,73,41,33,35,38,41,33,73,35,73,38,73,41,33,35,
										73,45,45,45,45,45,45,73,73,45,45,45,45,45,45,73,45,73,48,73,50,73,
										};

//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short zyounetutairiku_note_value[] = {250,250,375,125,250,750,250,250,250,125,125,125,125,750,250,250,
										250,125,125,125,250,125,125,250,125,125,250,125,166,166,166,166,166,166,500,250,250,
										375,125,250,750,250,250,166,166,166,166,166,166,750,250,
										125,125,125,125,125,125,125,125,125,125,125,125,166,166,166,166,166,166,166,166,166,250,125,125,250,250,
										375,125,250,750,250,250,250,125,125,125,125,750,250,250,
										250,125,125,125,250,125,125,250,125,125,250,125,166,166,166,166,166,166,500,250,250,
										375,125,250,750,250,250,166,166,166,166,166,166,750,250,
										125,125,125,125,125,125,125,125,125,125,125,125,166,166,166,
										166,166,166,166,166,166,500,250,250,250,125,125,125,125,125,125,125,375,250,250,
										250,125,125,125,125,125,125,125,375,250,250,250,125,125,125,125,125,125,125,375,250,250,
										250,125,125,125,125,125,125,125,375,250,250,
										375,125,250,750,250,250,250,125,125,125,125,750,250,250,
										250,125,125,125,250,125,125,250,125,125,250,125,166,166,166,166,166,166,500,250,250,
										375,125,250,750,250,250,166,166,166,166,166,166,750,250,
										125,125,125,125,125,125,125,125,125,125,125,125,250,250,250,
										250,250,500,500,500,1750,125,125,
										500,500,500,500,1750,125,125,500,500,500,500,1750,125,125,
										500,500,500,500,1750,125,125,500,500,500,500,1750,125,125,
										500,500,500,500,1750,125,125,500,500,500,500,1750,125,125,
										500,500,500,500,1750,125,125,1500,500,
										250,125,125,125,125,125,125,125,375,250,250,250,125,125,125,125,125,125,125,375,250,250,
										250,125,125,125,125,125,125,125,375,250,250,250,125,125,125,125,125,125,125,375,250,250,
										250,125,125,125,125,125,125,125,375,250,250,250,125,125,125,125,125,125,125,375,250,250,
										250,125,125,125,125,125,125,125,375,250,250,250,125,125,125,125,125,125,125,375,250,250,
										166,166,166,166,166,166,500,500,166,166,166,166,166,166,250,125,125,125,125,125,625,500,
										};

const unsigned char let_it_be_score[] = {73,31,31,31,31,33,28,31,31,36,38,38,40,40,38,38,36,36,//18
									40,40,41,40,40,38,40,38,38,36,73,73,31,//13
									31,31,33,36,33,31,36,38,38,40,40,38,38,36,36,//15
									40,40,41,40,40,38,40,38,38,36,73,40,38,36,//14
									40,43,45,73,43,43,38,36,33,31,40,73,//12
									40,40,41,40,40,38,40,38,38,36,73,73,28,//13
									31,31,31,31,33,28,31,31,36,38,38,40,40,38,38,36,36,//17
									40,40,41,40,40,38,40,38,38,36,73,73,31,//13
									31,31,33,36,33,31,36,38,38,40,40,38,38,36,36,//15
									40,40,41,40,40,38,40,38,38,36,73,40,38,36,//14
									40,43,45,73,43,43,38,36,33,31,40,73,//12
									40,40,41,40,40,38,40,38,//8
									38,36,73,40,38,36,40,43,45,73,43,43,38,//13
									36,33,31,40,73,40,40,41,40,40,38,40,38,//13
									38,36,73,29,28,26,24,22,21,//9
									19,17,24,29,28,26,24,22,21,//9
									19,17,24,73,//4
									40,38,36,40,43,45,73,43,43,38,//10
									36,33,31,40,73,40,40,41,40,40,38,40,38,//13
									38,36,73,//3
									31,31,31,31,33,28,31,31,36,38,38,40,40,38,38,36,36,//17
									40,40,41,40,40,38,40,38,38,36,73,73,31,//13
									31,31,33,36,33,31,36,38,38,40,40,38,38,36,36,//15
									40,40,41,40,40,38,40,38,38,36,73,40,38,36,//14
									40,43,45,73,43,43,38,36,33,31,40,73,//12
									40,40,41,40,40,38,40,38,38,36,//10
									73,40,38,36,//4
									40,43,45,73,43,43,38,36,33,31,40,73,//12
									40,40,41,40,40,38,40,38,38,36,73,//11
									40,38,36,40,43,45,73,43,43,38,//10
									36,33,31,40,73,40,40,41,40,40,38,40,38,//13
									38,36,73,29,28,26,24,22,21,//9
									19,17,24,29,28,26,24,22,21,//9
									19,17,24,//3
									};
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short let_it_be_note_value[] = {250,125,125,250,125,375,250,250,250,125,375,125,125,500,250,125,125,625,//18
									125,375,250,250,250,500,125,125,250,750,500,250,250,//13
									125,375,250,250,250,250,125,375,250,250,375,125,250,250,500,//15
									125,375,250,250,250,500,125,125,250,750,500,125,125,750,//14
									125,125,250,500,125,125,250,500,250,250,500,500,//12
									375,125,250,250,250,500,125,125,250,750,500,250,250,//13
									125,125,250,125,375,250,250,250,125,375,125,125,500,250,125,125,625,//17
									125,375,250,250,250,500,125,125,250,750,500,250,250,//13
									125,375,250,250,250,250,125,375,250,250,375,125,250,250,500,//15
									125,375,250,250,250,500,125,125,250,750,500,125,125,750,//14
									125,125,250,500,125,125,250,500,250,250,500,500,//12
									375,125,250,250,250,500,125,125,//8
									250,750,500,250,250,500,125,125,250,500,125,125,250,
									500,125,375,250,500,375,125,250,250,250,500,125,125,
									250,750,1000,500,250,250,500,250,250,//9
									500,500,1000,500,250,250,500,250,250,//9
									500,500,500,500,//4
									250,250,500,125,125,250,500,125,125,250,//10
									250,125,375,500,500,375,125,250,250,250,500,125,125,//13
									250,750,1000,//3
									125,125,250,125,375,250,250,250,125,375,125,125,500,250,125,125,625,//17
									125,375,250,250,250,500,125,125,250,750,500,250,250,//13
									125,375,250,250,250,250,125,375,250,250,375,125,250,250,500,//15
									125,375,250,250,250,500,125,125,250,750,500,125,125,750,//14
									125,125,250,500,125,125,250,500,250,250,500,500,//12
									375,125,250,250,250,500,125,125,250,750,//10
									500,125,125,750,//4
									125,125,250,500,125,125,250,500,250,250,500,500,//12
									375,125,250,250,250,500,125,125,250,750,500,//11
									250,250,500,125,125,250,500,125,125,250,//10
									500,125,375,500,500,375,125,250,250,250,500,125,125,//13
									250,750,1000,500,250,250,500,250,250,//9
									500,500,1000,500,250,250,500,250,250,//9
									500,500,1000,//3
										};

const unsigned char nhk_nodozimann_score[] = {36,38,36,35,36,45,43,41,40,43,41,40,38,36,34,36,34,33,34,43,41,40,73,//23
									34,36,34,33,34,43,41,40,40,41,40,38,38,40,41,43,40,38,36,//19
									36,38,36,35,36,45,43,41,40,43,41,40,38,36,34,36,34,33,34,43,41,40,73,38,40,//25
									41,38,40,41,41,43,45,46,45,43,38,41,40,36,41,73,//16
									};

const unsigned short nhk_nodozimann_note_value[] = {750,125,125,250,250,250,250,500,375,125,250,250,250,250,750,125,125,250,250,250,250,1500,500,//23
										750,125,125,250,250,250,250,1250,250,250,250,500,500,500,500,500,500,500,500,//19
										750,125,125,250,250,250,250,500,375,125,250,250,250,250,750,125,125,250,250,250,250,1000,500,250,250,//25
										500,375,125,500,375,125,1000,500,500,500,375,125,500,500,1500,500,//15
										};

const unsigned char doragon_quest_score1[]			= {28,28,28,26,26,26,24,26,28,29,28,26,28,29,31,33,36,33,31,29,28,26,26,26,//数24
 												28,28,28,28,24,28,26,73,31,31,36,38,40,41,//数14
 												43,73,48,47,45,45,43,73,42,42,45,43,73,40,73,28,28,28,28,30,32,//21
 												33,73,33,35,36,38,73,33,33,36,36,35,33,31,40,41,40,38,//18
 												36,33,36,38,40,38,36,36,35,31,43,40,41,43,//数14
 												45,33,35,36,41,40,36,//数7
 												};//98
const unsigned char doragon_quest_score2[]	= {24,24,24,19,19,19,16,19,24,26,24,19,24,26,28,29,33,29,28,26,24,19,19,19,//数24
												24,24,24,24,16,24,19,73,29,73,28,31,36,36,//数14
												36,73,36,36,73,40,40,73,36,36,73,40,73,36,73,12,23,14,26,26,//20
												24,73,9,33,73,26,26,73,31,31,26,26,32,32,32,73,//16
												33,28,33,33,33,33,73,31,31,7,40,37,1,//数13
												41,29,2,36,35,31,//数6
												};//93
const unsigned char doragon_quest_score3[]			= {73,//1
												73,12,11,10,9,//5
												4,5,12,7,0,12,0,4,7,73,4,73,12,11,//14
												9,11,12,73,6,9,14,6,7,9,11,7,4,8,11,4,//16
												9,11,12,9,6,9,14,6,7,9,11,73,1,4,9,73,//数16
												2,4,5,73,7,73,7,12,7,12,//数10
												};//62

const unsigned short doragon_quest_note_value1[]		= {375,125,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,375,125,250,//6000
												375,125,250,250,250,250,1250,1750,375,125,500,500,500,500,//7000
												250,250,1000,375,125,750,250,250,250,250,250,250,250,750,250,375,125,500,500,500,500,//8000
												1000,250,250,250,250,1000,250,250,250,250,500,500,500,500,1250,250,250,250,//8000
												1000,500,500,1250,250,250,250,1000,500,500,1250,250,250,250,//8000
												1250,250,250,250,1000,1000,1500,//5500
												};
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
const unsigned short doragon_quest_note_value2[]		= {375,125,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,375,125,250,//6000
												375,125,250,250,250,250,1250,1750,375,125,500,500,500,500,//数7000
												250,250,1000,375,125,750,250,250,250,250,250,250,250,750,250,500,500,500,500,500,//8000
												1000,500,500,1000,250,250,250,250,500,500,500,500,1250,250,250,250,//8000
												1000,500,500,1250,250,250,250,1000,500,500,1250,250,500,//8000
												1250,250,500,1000,1000,1500,//5500
												};

const unsigned short doragon_quest_note_value3[]		= {6000,//6000
												5000,500,500,500,500,//7000
												1000,1000,500,500,500,500,500,500,500,500,500,500,500,500,//8000
												500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,//8000
												500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,500,//8000
												500,500,500,1000,500,500,500,500,500,500,//5500
												};

const unsigned char boukennnosyo_score1[] =		{52,50,40,48,36,47,45,43,41,29,33,36,40,36,33,29,50,48,43,47,31,45,43,41,40,31,36,40,38,35,31,35,//32
												52,50,40,48,36,47,45,43,41,29,33,36,40,36,33,29,35,31,31,41,31,31,40,31,35,43,41,35,31,37,43,31,//32
												52,50,40,48,36,47,45,43,41,29,33,36,40,36,33,29,50,48,43,47,31,45,43,41,40,31,36,40,38,35,31,35,//32
												52,50,40,48,36,47,45,43,41,29,33,36,40,36,33,29,43,31,31,44,30,30,45,29,29,47,31,36,48,73,};//30

const unsigned char boukennnosyo_score2[] =		{48,47,73,45,73,43,41,40,38,73,29,33,36,33,29,73,47,45,73,43,73,41,40,38,36,73,73,31,35,31,73,31,//32
												48,47,73,45,73,43,41,40,38,73,29,33,36,33,29,73,31,73,73,35,73,73,35,73,31,35,73,73,73,73,73,31,//32
												48,47,73,45,73,43,41,40,38,73,29,33,36,33,29,73,47,45,73,43,73,41,40,38,36,73,73,31,35,31,73,31,//32
												48,47,73,45,73,43,41,40,38,73,29,33,36,33,29,73,41,73,73,38,73,73,39,73,73,41,73,73,43,73,};//30

const unsigned char boukennnosyo_score3[] =		{36,31,73,73,73,31,36,73,73,73,73,73,73,73,73,73,31,38,73,73,73,38,73,73,73,73,73,73,73,73,73,73,//32
												36,31,73,73,73,31,36,73,73,73,73,73,73,73,73,73,73,73,73,31,73,73,31,73,73,73,73,73,73,73,73,73,//32
												36,31,73,73,73,31,36,73,73,73,73,73,73,73,73,73,33,38,73,73,73,38,73,73,73,73,73,73,73,73,73,73,//32
												36,31,73,73,73,31,36,73,73,73,73,73,73,73,73,73,35,73,73,34,73,73,36,73,73,37,73,73,40,73,};//30

const unsigned short boukennnosyo_note_value[]			= {250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
												250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
												250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,
												250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,500,};

const unsigned char battle_score1[]						= {53,52,51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,//24
													29,//1
													41,48,47,43,44,44,//6
													55,41,49,37,46,43,53,38,46,31,43,29,50,31,41,29,46,43,46,29,38,41,43,46,//24
													55,37,46,30,38,46,49,31,38,46,25,31,50,31,46,38,26,31,38,42,46,50,46,31,//24
													41,48,47,43,44,45,//6
													55,41,49,37,46,43,53,38,46,31,43,29,50,31,41,29,46,43,46,31,38,41,43,46,//24
													54,37,46,30,38,46,49,31,38,46,25,31,50,31,46,38,26,31,34,38,42,46,//22
													48,48,48,48,48,73,48,48,48,48,48,73,48,48,48,48,48,73,48,48,48,48,48,73,//24
													29,36,35,73,31,73,34,29,30,31,28,//11
													31,36,35,73,31,73,34,29,30,31,28,//11
													41,41,41,41,41,73,40,40,40,40,40,73,39,39,39,39,39,73,24,24,24,73,24,24,24,73,24,24,24,73,24,24,//32
													41,41,41,41,41,73,40,40,40,40,40,73,39,39,39,39,39,73,24,24,24,73,24,24,24,73,24,24,24,73,24,24,//32
													29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,//24
												};//265



const unsigned char battle_score2[]						= {45,44,43,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,//24
													21,73,23,73,21,73,23,73,21,73,23,73,21,73,23,73,21,73,23,73,21,73,23,73,21,73,23,73,21,73,23,73,//32
													33,36,33,36,33,36,33,36,33,36,33,36,33,36,33,36,31,38,35,38,31,38,35,38,31,38,35,38,31,38,35,38,//32
													46,//1
													32,36,32,36,32,36,32,36,32,36,32,36,32,36,32,36,31,38,34,38,31,38,34,38,31,38,34,38,31,38,34,38,//32
													46,//1
													40,40,40,40,40,40,40,40,40,40,73,40,40,40,40,40,40,40,40,40,40,73,//22
													20,24,20,24,20,24,20,24,20,24,20,24,20,24,20,24,22,25,22,25,22,25,22,25,22,25,22,25,22,25,22,25,//32
													20,24,20,24,20,24,20,24,20,24,20,24,20,24,20,24,22,25,22,25,22,25,22,25,22,25,22,25,22,25,22,25,//32
													32,36,36,36,36,36,36,36,36,36,36,36,36,36,36,73,12,12,12,73,12,12,12,73,12,12,12,73,12,12,//30
													32,36,36,36,36,36,36,36,36,36,36,36,36,36,36,73,12,12,12,73,12,12,12,73,12,12,12,73,12,12,//30
													21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,//24
												};//292

const unsigned char battle_score3[]						= {73,//1
													18,73,20,73,18,73,20,73,18,73,20,73,18,73,20,73,18,73,20,73,18,73,20,73,18,73,20,73,18,73,20,73,//32
													17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,//32
													17,37,31,29,43,37,49,29,43,25,37,22,17,22,37,25,43,29,43,22,29,37,22,43,//24
													17,22,37,22,30,42,46,22,30,42,22,25,17,22,42,30,22,25,17,22,42,46,42,22,//24
													17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,17,73,17,17,//32
													17,37,31,29,43,37,49,29,43,25,37,22,17,22,37,25,43,29,43,22,29,37,22,43,//24
													17,22,37,22,30,42,46,22,30,42,22,25,17,22,42,30,22,25,30,34,37,42,//22
													13,13,13,13,13,73,13,13,13,13,13,73,24,18,16,12,13,13,13,13,13,73,13,13,13,13,13,73,24,18,16,12,//32
													18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,//32
													18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,18,73,18,18,//32
													17,32,32,32,32,73,32,32,32,32,32,73,32,32,32,32,32,73,//18
													17,32,32,32,32,73,32,32,32,32,32,73,32,32,32,32,32,73,//18
													15,73,//2
												};//325
const unsigned short battle_note_value1[]					= {83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													4000,//1:4000
													1000,1000,1500,250,125,125,//6:4000
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													1000,1000,1500,250,125,125,//6:4000
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,125,125,125,125,//22:1994
													125,125,125,125,125,125,125,125,125,125,125,625,125,125,125,125,125,125,125,125,125,125,125,625,//24:4000
													500,250,250,250,250,250,1500,125,125,250,250,//11:4000
													500,250,250,250,250,250,1500,125,125,250,250,//11:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													};//265:43954
const unsigned short battle_note_value2[]					= {83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													3984,
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													3984,
													125,125,125,125,250,125,125,125,125,250,500,125,125,125,125,250,125,125,125,125,250,500,//22:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,250,125,125,125,125,250,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//30:4000
													125,125,125,125,250,125,125,125,125,250,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//30:4000
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													};//292:43952
const unsigned short battle_note_value3[]					= {1992,//1:1992
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000

													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992

													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,//24:1992
													83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,125,125,125,125,//22:1994

													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,//32:4000

													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,1750,//18:4000
													125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,1750,//18:4000
													83,1909//2:1992
													};//325:43954
const unsigned char ally_attack_score[]			= {43,44,42,43,44,42,};
const unsigned short ally_attack_note_value[]		= {62,62,62,62,62,62,};

const unsigned char level_up_score1[]			= {41,41,41,41,39,43,41,};
const unsigned char level_up_score2[]			= {36,35,34,33,31,35,33,};
const unsigned short level_up_note_value[]			= {125,125,125,250,250,250,750,};

const unsigned char win_score[]					= {24,26,28,29,31,33,35,36,38,40,41,43,45,47,48};
const unsigned short win_note_value[]				= {500,25,25,25,25,25,25,25,25,25,25,25,25,25,500};

const unsigned char yadoya_score1[]				= {50,49,48,47,45,38,50};
const unsigned char yadoya_score2[]					= {42,41,40,38,36,30,42,};
const unsigned short yadoya_note_value[]				= {250,250,250,250,250,250,500,};

const unsigned char CANON_SCORE1[] = {40,38,36,35,33,31,33,35,//8
										36,35,36,24,23,31,26,28,24,36,35,33,35,40,43,45,41,40,38,41,40,38,36,35,//24
										 33,31,29,28,26,29,28,26,24,26,28,29,31,26,31,29,28,33,31,29,31,29,28,26,//24
										 24,33,35,36,35,33,31,29,28,26,33,31,33,31,29,43,40,41,43,40,41,43,31,33,35,36,38,40,41,//29
										 40,36,38,40,28,29,31,33,31,29,31,28,29,31,29,33,31,29,28,26,28,26,24,26,28,29,31,33,//28
										29,33,31,33,35,36,31,33,35,36,38,40,41,43,36,43,43,45,43,41,40,40,40,41,40,38,//26
										36,34,33,34,31,31,29,36,36,35,36,//11
										};

const unsigned char CANON_SCORE2[] = {12,7,9,4,5,0,5,7,//8
										12,7,9,4,5,0,//6
										5,7,12,7,9,4,//6
										5,0,5,9,0,9,//6
										5,7,12,7,9,4,//6
										5,0,5,7,28,//5
										};
const unsigned char CANON_SCORE3[] = {73,73,
										0,
										};
const unsigned short CANON_NOTE_VALUE1[] = {1000,1000,1000,1000,1000,1000,1000,1000,//8000
											250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,//6000
											250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,//6000
											500,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,125,125,250,125,125,125,125,125,125,125,125,125,125,//6000
											250,125,125,250,125,125,125,125,125,125,125,125,125,125,250,125,125,250,125,125,125,125,125,125,125,125,125,125,//4000
											250,125,125,250,125,125,125,125,125,125,125,125,125,125,750,250,250,250,250,250,750,250,250,250,250,250,//6000
											250,250,250,250,750,250,500,500,750,250,2000,//6000
											};//42000

const unsigned short CANON_NOTE_VALUE2[] = {1000,1000,1000,1000,1000,1000,1000,1000,//8000
											1000,1000,1000,1000,1000,1000,
											1000,1000,1000,1000,1000,1000,
											1000,1000,1000,1000,1000,1000,
											1000,1000,1000,1000,//4000
											1000,1000,1000,1000,1000,1000,
											1000,1000,1000,1000,1000,1000,
											};//42000
const unsigned short CANON_NOTE_VALUE3[] = {20000,20000,
											2000,
											};

//0　　1	　2	 3  4  5  6	  7	 8   9	10	 11
//ド　 ド＃ レ  レ＃ ミ  ファ ファ＃ソ	ソ＃  ラ	ラ＃   シ
//12  13  14  15  16  17  18   19   20  21  22   23
//ド   ド＃　 レ  レ＃ ミ  ファ  ファ＃  ソ	ソ＃  ラ　  ラ＃  シ
//24  25   26 27  28 29  30   31  32  33  34 35
//ド   ド＃　 レ　レ＃　 ミ 　ファ　ファ＃  ソ  ソ＃  ラ  ラ＃　シ
//36  37  38 39 40 41  42 43 44 45 46  47
//ド  ド＃  レ　レ＃　ミ　ファ　ファ＃ ソ　ソ＃ ラ　ラ＃  シ
//48   49  50   51   52   53   54   55  56    57   58  59
//ド　ド＃　レ　レ＃　ミ　ファファ＃ソソ＃　 ラ　ラ＃シ
//60　　61　　62　63　　64　65　　66　　67　68　 69　 70  71  72 73
//ド　　ド＃　レ　レ＃　ミ　ファ　ファ＃ソ　ソ＃　ラ　ラ＃シ　ド 消音
const unsigned char zennmetu_score1[]			= {41,38,33,41,40,37,33,40,38,34,31,38,37,35,33,32,33,32,33,};//17
const unsigned char zennmetu_score2[]			= {29,26,21,29,28,25,21,28,26,22,19,26,25,23,21,20,21,20,21};//17
const unsigned char zennmetu_score3[]			= {73,14,73,13,73,10,73,};//7

const unsigned short zennmetu_note_value1[]		= {250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,125,125,1250};//5500
const unsigned short zennmetu_note_value2[]		= {250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,250,125,125,1250};//5500
const unsigned short zennmetu_note_value3[]		= {250,500,500,500,500,500,2750};
const unsigned char initial_check_score[]				= {24,26,28,29,31,33,35,36};
const unsigned short initial_check_note_value[]			=	{500,500,500,500,500,500,500,500};
const unsigned char *score_pointer_array[SONG_NUM][SUPEAKER_NUM]	= {{ave_maria_score,NULL,NULL},{saint_march_score,NULL,NULL},
																		{menuett_score,NULL,NULL},{jesu_joy_of_man_s_score,NULL,NULL},
																		{aura_lee_score,NULL,NULL},{sakura_score,NULL,NULL},
																		{zyounetutairiku_score,NULL,NULL},{let_it_be_score,NULL,NULL},
																		{nhk_nodozimann_score,NULL,NULL},{doragon_quest_score1,doragon_quest_score2,doragon_quest_score3},
																		{level_up_score1,level_up_score2,NULL},{win_score,NULL,NULL},
																		{boukennnosyo_score1,boukennnosyo_score2,boukennnosyo_score3},{yadoya_score1,yadoya_score2,NULL},
																		{ally_attack_score,NULL,NULL},{battle_score1,battle_score2,battle_score3},
																		{zennmetu_score1,zennmetu_score2,zennmetu_score3},{initial_check_score,NULL,NULL},
																		{CANON_SCORE1,CANON_SCORE2,CANON_SCORE3},
																		};

const unsigned short *note_pointer_array[SONG_NUM][SUPEAKER_NUM]	= {{ave_maria_note_value,NULL,NULL},{saint_march_note_value,NULL,NULL},
																		{menuett_note_value,NULL,NULL},{jesu_joy_of_man_s_note_value,NULL,NULL},
																		{aura_lee_note_value,NULL,NULL},{sakura_note_value,NULL,NULL},
																		{zyounetutairiku_note_value,NULL,NULL},{let_it_be_note_value,NULL,NULL},
																		{nhk_nodozimann_note_value,NULL,NULL},{doragon_quest_note_value1,doragon_quest_note_value2,doragon_quest_note_value3},
																		{level_up_note_value,level_up_note_value,NULL},{win_note_value,NULL,NULL},
																		{boukennnosyo_note_value,boukennnosyo_note_value,boukennnosyo_note_value},{yadoya_note_value,yadoya_note_value,NULL},
																		{ally_attack_note_value,NULL,NULL},{battle_note_value1,battle_note_value2,battle_note_value3},
																		{zennmetu_note_value1,zennmetu_note_value2,zennmetu_note_value3},{initial_check_note_value,NULL,NULL},
																		{CANON_NOTE_VALUE1,CANON_NOTE_VALUE2,CANON_NOTE_VALUE3},
																		};
//少年時代　戦場のメリークリスマス
const unsigned char use_speaker_array[SONG_NUM]						= {1,1,1,1,1,1,1,1,1,3,2,1,3,2,1,3,3,1,3};
const unsigned short note_size_array[SONG_NUM][SUPEAKER_NUM]		= {{113,0,0},{33,0,0},{127,0,0},{169,0,0},{47,0,0},{181,0,0},{427,0,0},{390,0,0},
																		{83,0,0},{98,93,62},{7,7,0},{15,0,0},{126,126,126},{7,7,0},{6,0,0},{265,292,325},{19,19,7},{8,0,0},
																		{150,37,3}};
//全音符2000　二分音符1000　四分音符500　八分音符250　十六分音符125
/********************************************************************/
/*プロトタイプ宣言													*/
/********************************************************************/
void auto_play_end_processing(void);
void score_set_speaker(int title,unsigned char wave_type,unsigned short start1,unsigned short start2,unsigned short start3);
void forward_score(void);
void output_function_call(void);


struct SPEAKER *g_speaker;				//スピーカー構造体へのポインタ
struct SPEAKER interrupt_data[3];//エンターやスイッチで演奏終了したときのスピーカの情報を保存しておく
unsigned char g_use_speaker_num;		//使用するスピーカーの個数
unsigned long common_timer = 1;
unsigned char playing_flg = OFF;

/*
 * 自動演奏ノンブロッキング版
 *
 *
 */
void automatic_playing(unsigned short title,unsigned char wave_type,unsigned short start1,unsigned short start2,unsigned short start3)
{
	sci0_receive_start();//受信開始
	playing_flg						= ON;//演奏中フラグON
	g_speaker						= get_speaker();//スピーカへのポインタ貰う
	score_set_speaker(title,wave_type,start1,start2,start3);//楽譜をセットする、曲の開始位置のセット
}

/********************************************************************/
/*時間経過で楽譜を進めるコールバック関数										*/
/*void forward_score(unsigned char i)								*/
/*	引数：unsigned char i　スピーカー番号									*/
/********************************************************************/
//経過時間をダウンカウント
//経過時間を見て０ならスコアカウントを進める
//スコアカウントが楽譜配列のサイズと同じになったら終了フラグをONにしてスピーカを消音する
//スコアカウントが楽譜配列のサイズより小さい場合セットフラグをONにする
void forward_score(void)
{
	unsigned char i;
	for(i = 0;i < g_use_speaker_num;i++){
		g_speaker[i].elapsed_time--;
		if(g_speaker[i].elapsed_time == 0){
			g_speaker[i].score_count++;//音符番号を進める
			if(g_speaker[i].score_count >= g_speaker[i].note_size){//最後まで演奏したら
				g_speaker[i].end_flg	= ON;
			}
			else
				g_speaker[i].set_flg	= ON;
		}
	}
	common_timer						= 1;
}

/********************************************************************************************/
/*LEDとスピーカ出力																			*/
/*void output_function_call(void)															*/
/********************************************************************************************/
void output_function_call(void)
{
	unsigned char i;
	unsigned char output_pattern = 0;
	for(i = 0;i < g_use_speaker_num;i++){
		if(g_speaker[i].set_flg == ON){//スコアカウントが動いたか判定
			set_output_value(g_speaker[i].pscore[g_speaker[i].score_count],i);
			g_speaker[i].set_flg	= OFF;
			output_pattern				+= SET << i;
		}
	}
	if(output_pattern != 0){
		set_output_speaker_length(output_pattern);
		output_speaker_start(output_pattern);//出力開始
	}
	common_timer = 1;
}

/*
 * 演奏終了判定
 *void end_decision(void)
 */
//全てのエンドフラグを見てONなら自動演奏終了関数を呼び出す
void end_flg_check(void)
{
	if(g_speaker[0].end_flg ==  ON && g_speaker[1].end_flg == ON && g_speaker[2].end_flg == ON){//演奏が最後まで終わったか判定
		auto_play_end_processing();//タイマーストップ、変数初期化
	}
	common_timer = 1;
}

/*
 * エンターキーとスイッチ入力の判定
 *
 */
//自動演奏以外にも使える汎用的なスイッチ、エンターポーリング関数にする
unsigned char input_check(void)
{
	unsigned char ret						= OFF;
	static unsigned char sw_state			= OFF;
	static unsigned char last_sw_state		= OFF;
	sw_state				= sw_check();
	if(sw_state != OFF){//スイッチが押されていたら
		last_sw_state		= sw_state;//スイッチの状態記録
	}else if(sci0_enter_check() == ON){//スイッチが押されている時はエンターは見ない
		ret				= ON;
	}else if(last_sw_state != OFF){//スイッチが離された
		ret				= last_sw_state;
		last_sw_state	= OFF;
	}
	return ret;
}

/********************************************************************/
/*自動演奏終了処理													*/
/*void auto_play_end_processing(void)								*/
/********************************************************************/
void auto_play_end_processing(void)
{
	g_use_speaker_num	= 0;
	output_led(REST);				//LED消灯
	mute(3);//スピーカーi消音
	interrupt_data[0]			= g_speaker[0];
	interrupt_data[1]			= g_speaker[1];
	interrupt_data[2]			= g_speaker[2];
	count_timer_dell(forward_score);
	count_timer_dell(output_function_call);
	count_timer_dell(end_flg_check);
	count_timer_dell(input_check);
	g_speaker[0].elapsed_time	= 0;
	g_speaker[1].elapsed_time	= 0;
	g_speaker[2].elapsed_time	= 0;
	g_speaker[0].end_flg		= OFF;
	g_speaker[1].end_flg		= OFF;
	g_speaker[2].end_flg		= OFF;
	playing_flg					= OFF;//演奏中フラグOFF
}

/********************************************************************************************/
/*楽譜,演奏開始位置,波形をスピーカーにセットする											  				*/
/*void void score_set_speaker(int title,unsigned short start_point,unsigned char )	*/
/*	引数：int title タイトル番号													  				*/
/*		unsigned short start_point 演奏開始する添え字番号							  				*/
/*		unsigned char  出力波形										  				*/
/********************************************************************************************/
void score_set_speaker(int title,unsigned char wave_type,unsigned short start1,unsigned short start2,unsigned short start3)
{
	unsigned char i;
	g_speaker[0].score_count 		= start1;
	g_speaker[1].score_count 		= start2;
	g_speaker[2].score_count 		= start3;//演奏開始位置の設定
	g_speaker[0].wave_type			= wave_type;
	g_speaker[0].pscore				= score_pointer_array[title-1][0];
	g_speaker[1].pscore				= score_pointer_array[title-1][1];
	g_speaker[2].pscore				= score_pointer_array[title-1][2];
	g_speaker[0].pnote_value		= note_pointer_array[title-1][0];
	g_speaker[1].pnote_value		= note_pointer_array[title-1][1];
	g_speaker[2].pnote_value		= note_pointer_array[title-1][2];
	g_speaker[0].note_size			= note_size_array[title-1][0];
	g_speaker[1].note_size			= note_size_array[title-1][1];
	g_speaker[2].note_size			= note_size_array[title-1][2];
	g_use_speaker_num				= use_speaker_array[title-1];
	if(start1 == 0 && start2 == 0 && start3 == 0){
		switch(g_use_speaker_num){
		case 1:
			g_speaker[0].set_flg	= ON;
			g_speaker[1].end_flg	= g_speaker[2].end_flg = ON;
			break;
		case 2:
			g_speaker[0].set_flg 	= g_speaker[1].set_flg = ON;
			g_speaker[2].end_flg	= ON;
			break;
		case 3:
			g_speaker[0].set_flg 	= g_speaker[1].set_flg = g_speaker[2].set_flg		= ON;
			break;
		}
	}else{//途中から演奏する時は経過時間の更新をされたくないためset_flgをOFFでスタートする
		for(i = 0;i < g_use_speaker_num;i++){
			set_output_value(g_speaker[i].score_count,i);
		}
		output_speaker_start(3);//出力開始

	}
	count_timer_set(&common_timer,output_function_call);//出力関数の登録
	count_timer_set(&common_timer,forward_score);//経過時間監視のエリアを登録
	count_timer_set(&common_timer,end_flg_check);
}

/*
 * 自動演奏を中断したときのデータをもらう
 * struct SPEAKER get_interrupt_data(speaker_num)
 *
 *
 */
struct SPEAKER get_interrupt_data(speaker_num)
{
	return interrupt_data[speaker_num];
}


